<div class="auth-container">
    <!-- Auth card -->
    <div class="auth-card">
        <!-- Loading overlay -->
        <div class="auth-loading" ng-if="loading">
            <md-progress-circular md-mode="indeterminate" md-diameter="50" class="md-accent"></md-progress-circular>
        </div>

        <!-- Auth header -->
        <div class="auth-header">
            <div class="auth-icon-container">
                <md-icon class="material-icons auth-icon">vpn_key</md-icon>
            </div>
            <h1 class="auth-title" translate>Récupération de mot de passe</h1>
            <p class="auth-subtitle" translate>Entrez votre adresse email et nous vous enverrons un lien pour réinitialiser votre mot de passe.</p>
        </div>

        <!-- Auth body -->
        <div class="auth-body">
            <!-- Error message -->
            <div class="auth-error" ng-if="recoveryError">
                <md-icon class="material-icons">error_outline</md-icon>
                <span>{{recoveryError}}</span>
                <button type="button" class="close" ng-click="recoveryError = null">×</button>
            </div>

            <!-- Success message -->
            <div class="auth-success" ng-if="recoverySuccess">
                <md-icon class="material-icons">check_circle</md-icon>
                <span>{{recoverySuccess}}</span>
            </div>

            <!-- Recovery form -->
            <form class="auth-form" name="recoveryForm" ng-submit="submit();" novalidate>
                <md-input-container class="md-block">
                    <label translate>Email</label>
                    <md-icon class="material-icons">email</md-icon>
                    <input type="email" ng-model="email" name="email" required 
                           autocomplete="email" autocorrect="off" autocapitalize="off" spellcheck="false"
                           ng-keypress="handleKeyPress($event)">
                    <div ng-messages="recoveryForm.email.$error" ng-if="recoveryForm.email.$touched">
                        <div ng-message="required" translate>L'email est requis</div>
                        <div ng-message="email" translate>Format d'email invalide</div>
                    </div>
                </md-input-container>

                <md-button type="submit" class="md-primary md-raised" ng-disabled="recoveryForm.$invalid && recoveryForm.$dirty">
                    <span ng-if="!loading" translate>Réinitialiser le mot de passe</span>
                    <span ng-if="loading"><md-icon class="material-icons spin">sync</md-icon> <span translate>Envoi en cours...</span></span>
                </md-button>

                <div class="auth-divider">
                    <span translate>Vous avez déjà un compte?</span>
                </div>

                <md-button class="md-raised" ui-sref="signin" aria-label="Retour à la connexion">
                    <md-icon class="material-icons">arrow_back</md-icon>
                    <span translate>Retour à la connexion</span>
                </md-button>
            </form>
        </div>

        <!-- Auth footer -->
        <div class="auth-footer">
            <p translate>© {{currentYear = (currentYear || new Date().getFullYear())}} Admineex - Système de Gestion du Personnel</p>
        </div>
    </div>
</div>

<style>
/* Animation for spinner */
.spin {
    animation: spin 1.5s linear infinite;
}
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Success message styling */
.auth-success {
    background-color: #E8F5E9;
    color: #2E7D32;
    padding: 12px;
    border-radius: 4px;
    margin-bottom: 20px;
    font-size: 14px;
    display: flex;
    align-items: center;
}

.auth-success md-icon {
    margin-right: 8px;
    min-width: 20px;
}

.auth-icon-container {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background-color: #FFF8E1;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 15px;
}

.auth-icon {
    font-size: 36px !important;
    color: #FFA000;
}
</style>
