<!-- Personnel Records View -->
<div class="personnel-container" ui-view>
    <md-content layout="column" flex>
        <!-- Search Section -->
        <div class="personnel-search">
            <form>
                <md-autocomplete md-search-text="personnelSearchText"
                                md-selected-item-change="selectedPersonnelChange(perso)"
                                md-items="perso in personnelQuerySearch(personnelSearchText)"
                                md-item-text="perso.fname"
                                md-min-length="2"
                                placeholder="{{'Search a staff (Name, matricule or CNI)' | translate}}"
                                required
                                md-require-match
                                flex>
                    <md-item-template>
                        <div class="search-result-item">
                            <span md-highlight-text="deficitaireSearchText" class="search-result-name">{{perso.fname}}</span>
                            <small class="search-result-details">
                                <span ng-if="perso.identifier">{{"Mle: " + (perso.identifier)}}</span>
                                <span ng-if="perso.gender"> | {{(perso.gender)}}, {{(perso.age) + " ans"}}</span>
                                <span ng-if="perso.affectedTo.position.name"> | {{perso.affectedTo.position.name}}</span>
                            </small>
                        </div>
                    </md-item-template>
                    <md-not-found>
                        <div class="search-no-results">
                            "{{personnelSearchText}}"<span translate>:</span> <span translate>No matching information was found.</span>
                        </div>
                    </md-not-found>
                </md-autocomplete>
            </form>
        </div>

        <!-- Action Buttons -->
        <div class="personnel-actions" layout="row" ng-if="personnelSelected">
            <span flex></span>
            <md-button class="action-button md-raised" ng-click="openPdf()">
                <i class="icon-file-pdf"></i> <span translate>Download</span>
            </md-button>
            <md-button class="action-button md-raised" ng-click="downloadFollowUpSheet()">
                <i class="icon-file-pdf"></i> <span translate>Fiche de suivi</span>
            </md-button>
        </div>

        <!-- Empty State -->
        <div class="personnel-empty-state" layout="column" layout-align="center center" ng-if="!personnelSelected">
            <md-icon aria-label="{{helper.title}}" class="material-icons">{{helper.icon}}</md-icon>
            <h2 class="md-title">{{helper.title}}</h2>
        </div>

        <!-- Personnel Header Card -->
        <md-card class="personnel-card" ng-if="personnelSelected">
            <md-card-header class="personnel-header" layout="column" layout-align="center center">
                <div class="personnel-avatar-container">
                    <img ng-src="{{userImage}}" class="personnel-avatar" alt="Profile Image" />
                </div>
                <div class="personnel-info">
                    <h2 class="personnel-name">
                        {{personnelSelected.fname ? personnelSelected.fname : personnelSelected.name.family[0] + " " + personnelSelected.name.given[0]}}
                    </h2>
                    <p class="personnel-position" ng-if="personnelSelected.affectedTo.position.name">
                        {{personnelSelected.affectedTo.position.name | uppercase | unknown}}
                        <span class="personnel-status" ng-if="personnelSelected.situations[0].situation">({{personnelSelected.situations[0].value}})</span>
                    </p>
                    <p class="personnel-structure" ng-if="personnelSelected.affectedTo.position.name">
                        {{personnelSelected.affectedTo.position.structure.name | unknown}}
                        <span ng-if="personnelSelected.affectedTo.position.structure"> - {{personnelSelected.affectedTo.position.structure.father.name}}</span>
                    </p>
                </div>

                <!-- Skills Progress -->
                <div class="skill-progress-container" layout="row" layout-wrap>
                    <div class="skill-progress" flex="45" flex-xs="100">
                        <div class="skill-progress-label">
                            <span translate>Profile</span>
                            <span>{{personnelSelected.profilesCorresponding}}%</span>
                        </div>
                        <md-progress-linear class="skill-progress-bar" md-mode="determinate" value="{{personnelSelected.profilesCorresponding}}"></md-progress-linear>
                    </div>
                    <div class="skill-progress" flex="45" flex-xs="100">
                        <div class="skill-progress-label">
                            <span translate>Skills</span>
                            <span>{{personnelSelected.skillsCorresponding}}%</span>
                        </div>
                        <md-progress-linear class="skill-progress-bar" md-mode="determinate" value="{{personnelSelected.skillsCorresponding}}"></md-progress-linear>
                    </div>
                </div>
            </md-card-header>
        </md-card>

        <!-- Personnel Tabs -->
        <md-tabs class="personnel-tabs" md-dynamic-height md-border-bottom ng-if="personnelSelected">
            <!-- Personal Data Tab -->
            <md-tab label='{{"Personnal data"| translate }}' ng-click="selectTab(0)">
                <md-content class="personnel-tab-content">
                    <div class="personnel-tab-container">
                        <!-- Action Buttons -->
                        <div class="personnel-action-buttons">
                            <md-button class="action-button md-raised" ng-click="newAffectation(personnelSelected)">
                                <md-icon>transfer_within_a_station</md-icon>
                                <span translate>New affectation</span>
                            </md-button>
                            <md-button class="action-button md-raised" ng-click="newSanction(personnelSelected, '1')">
                                <md-icon>gavel</md-icon>
                                <span translate>New sanction</span>
                            </md-button>
                            <md-button class="action-button md-raised" ng-click="newSanction(personnelSelected, '3')">
                                <i class="icon-trophy3"></i>
                                <span translate>New award</span>
                            </md-button>
                            <md-button class="action-button md-raised" ng-click="newStaffSituation(personnelSelected)">
                                <i class="icon-flag"></i>
                                <span translate>New situation</span>
                            </md-button>
                        </div>

                        <!-- Personal Information Card -->
                        <div class="info-section">
                            <md-card class="info-card">
                                <div class="info-card-header">
                                    <h3 class="info-card-title" translate>Personal Information</h3>
                                </div>
                                <md-card-content>
                                    <md-list class="info-list">
                                        <md-list-item>
                                            <md-icon>face</md-icon>
                                            <p class="info-label" translate>Full name</p>
                                            <p class="info-value md-secondary">{{personnelSelected.fname?personnelSelected.fname:personnelSelected.name.family[0] + " " + personnelSelected.name.given[0]}}</p>
                                        </md-list-item>
                                        <md-divider></md-divider>
                                        
                                        <md-list-item ng-if="personnelSelected.birthDate">
                                            <md-icon>cake</md-icon>
                                            <p class="info-label" translate>Age</p>
                                            <p class="info-value md-secondary">{{personnelSelected.age}} <span translate>Years</span></p>
                                        </md-list-item>
                                        <md-divider ng-if="personnelSelected.birthDate"></md-divider>
                                        
                                        <md-list-item ng-if="personnelSelected.birthDate">
                                            <md-icon>event</md-icon>
                                            <p class="info-label" translate>Birth date</p>
                                            <p class="info-value md-secondary">{{personnelSelected.birthDate| dateHuman}}</p>
                                        </md-list-item>
                                        <md-divider ng-if="personnelSelected.birthDate"></md-divider>
                                        
                                        <md-list-item ng-if="personnelSelected.birthPlace">
                                            <md-icon>place</md-icon>
                                            <p class="info-label" translate>Birth place</p>
                                            <p class="info-value md-secondary">{{personnelSelected.birthPlace}}</p>
                                        </md-list-item>
                                        <md-divider ng-if="personnelSelected.birthPlace"></md-divider>

                                        <md-list-item>
                                            <md-icon>accessibility</md-icon>
                                            <p class="info-label" translate>Gender</p>
                                            <p class="info-value md-secondary">{{personnelSelected.gender}}</p>
                                        </md-list-item>
                                        <md-divider></md-divider>
                                        
                                        <md-list-item>
                                            <md-icon>family_restroom</md-icon>
                                            <p class="info-label" translate>Family situation</p>
                                            <p class="info-value md-secondary">{{personnelSelected.maritalStatus}}</p>
                                        </md-list-item>
                                        <md-divider></md-divider>
                                        
                                        <md-list-item>
                                            <md-icon>person</md-icon>
                                            <p class="info-label" translate>Spouse's name</p>
                                            <p class="info-value md-secondary">{{personnelSelected.partner}}</p>
                                        </md-list-item>
                                        <md-divider></md-divider>
                                        
                                        <md-list-item>
                                            <md-icon>child_care</md-icon>
                                            <p class="info-label" translate>Number of child</p>
                                            <p class="info-value md-secondary">{{personnelSelected.children}}</p>
                                        </md-list-item>
                                        <md-divider></md-divider>
                                        
                                        <md-list-item>
                                            <md-icon>location_on</md-icon>
                                            <p class="info-label" translate>Origin of</p>
                                            <p class="info-value md-secondary">CMR, {{personnelSelected.address[0].region}}, {{personnelSelected.address[0].department}}</p>
                                        </md-list-item>
                                        <md-divider></md-divider>
                                        
                                        <md-list-item>
                                            <md-icon>phone</md-icon>
                                            <p class="info-label" translate>Phone number</p>
                                            <p class="info-value md-secondary">{{personnelSelected.telecom[0].value}}</p>
                                        </md-list-item>
                                        <md-divider></md-divider>
                                        
                                        <md-list-item>
                                            <md-icon>email</md-icon>
                                            <p class="info-label" translate>Email</p>
                                            <p class="info-value md-secondary">{{personnelSelected.telecom[1].value}}</p>
                                        </md-list-item>
                                    </md-list>
                                </md-card-content>
                            </md-card>

                            <!-- Education Card -->
                            <md-card class="info-card" ng-if="personnelSelected.qualifications.schools.length > 0">
                                <div class="info-card-header">
                                    <h3 class="info-card-title" translate>School and Training</h3>
                                </div>
                                <md-card-content>
                                    <md-list class="education-list">
                                        <md-list-item class="education-item" ng-repeat="diplome in personnelSelected.qualifications.schools">
                                            <div class="education-details">
                                                <h3 class="education-institution">{{ diplome.autority }}</h3>
                                                <h4 class="education-diploma">{{ diplome.diploma }}</h4>
                                                <p class="education-date">{{ diplome.date }}</p>
                                            </div>
                                            <md-divider ng-if="!$last"></md-divider>
                                        </md-list-item>
                                    </md-list>
                                </md-card-content>
                            </md-card>
                        </div>
                        
                        <!-- Professional Information Card -->
                        <div class="info-section">
                            <md-card class="info-card">
                                <div class="info-card-header">
                                    <h3 class="info-card-title" translate>Professional Information</h3>
                                </div>


                        </md-card>

                        <md-card>
                            <md-card>
                                <md-card-title>
                                    <md-card-title-text>
                                        <span class="md-headline" translate>Professional informations</span>
                                    </md-card-title-text>
                                </md-card-title>
                                <md-card-content>
                                    <md-list class="info-list">
                                        <md-list-item>
                                            <md-icon>business</md-icon>
                                            <p class="info-label" translate>Structure</p>
                                            <p class="info-value md-secondary">{{personnelSelected.affectedTo.position.structure.name | uppercase | unknown}}</p>
                                        </md-list-item>
                                        <md-divider></md-divider>
                                        
                                        <md-list-item>
                                            <md-icon>work</md-icon>
                                            <p class="info-label" translate>Function</p>
                                            <p class="info-value md-secondary">{{personnelSelected.affectedTo.position.name | uppercase | unknown}}</p>
                                        </md-list-item>
                                        <md-divider></md-divider>
                                        
                                        <md-list-item>
                                            <md-icon>military_tech</md-icon>
                                            <p class="info-label" translate>Rank</p>
                                            <p class="info-value md-secondary">{{personnelSelected.affectedTo.rank | uppercase | unknown}}</p>
                                        </md-list-item>
                                        <md-divider></md-divider>
                                        
                                        <md-list-item>
                                            <md-icon>badge</md-icon>
                                            <p class="info-label" translate>Registration number</p>
                                            <p class="info-value md-secondary">{{personnelSelected.identifier | uppercase | unknown}}</p>
                                        </md-list-item>
                                        <md-divider></md-divider>
                                        
                                        <md-list-item>
                                            <md-icon>how_to_reg</md-icon>
                                            <p class="info-label" translate>Status</p>
                                            <p class="info-value md-secondary">{{personnelSelected.status | uppercase | unknown}}</p>
                                        </md-list-item>
                                        <md-divider></md-divider>
                                        <md-list-item>
                                            <md-icon>group_work</md-icon>
                                            <p class="info-label" translate>Corps</p>
                                            <p class="info-value md-secondary">{{personnelSelected.corps | uppercase | unknown}}</p>
                                        </md-list-item>
                                        <md-divider></md-divider>
                                        
                                        <md-list-item>
                                            <md-icon>stars</md-icon>
                                            <p class="info-label" translate>Grade</p>
                                            <p class="info-value md-secondary">{{personnelSelected.grade | uppercase | unknown}}</p>
                                        </md-list-item>
                                        <md-divider></md-divider>
                                        
                                        <md-list-item>
                                            <md-icon>category</md-icon>
                                            <p class="info-label" translate>Category</p>
                                            <p class="info-value md-secondary">{{personnelSelected.category | uppercase | unknown}}</p>
                                        </md-list-item>
                                        <md-divider></md-divider>
                                        
                                        <md-list-item>
                                            <md-icon>format_list_numbered</md-icon>
                                            <p class="info-label" translate>Index/Level</p>
                                            <p class="info-value md-secondary">{{personnelSelected.index | uppercase | unknown}}</p>
                                        </md-list-item>
                                        <md-divider></md-divider>
                                        <md-list-item>
                                            <md-icon>event_busy</md-icon>
                                            <p class="info-label" translate>Retirement date</p>
                                            <p class="info-value md-secondary">{{personnelSelected.retirementDate | dateHuman | unknown}}</p>
                                        </md-list-item>
                                        <md-divider></md-divider>
                                        
                                        <md-list-item>
                                            <md-icon>assignment_ind</md-icon>
                                            <p class="info-label" translate>Actual situation</p>
                                            <p class="info-value md-secondary">
                                                {{personnelSelected.situations[0].value | unknown}}
                                                <span ng-if="personnelSelected.situations[0]" class="situation-history">
                                                    <md-icon>info</md-icon>
                                                    <md-tooltip class="tooltip1">
                                                        <span ng-repeat="sit in personnelSelected.situations">{{sit.date | dateHuman }} | {{sit.value}} <br/></span>
                                                    </md-tooltip>
                                                </span>
                                            </p>
                                        </md-list-item>
                                        
                                        <div data-ng-include="'templates/staffs/more/sanctions.html'" class="sanctions-container"></div>
                                    </md-list>
                                </md-card-content>
                                
                                <md-card-actions layout="row" layout-align="end center">
                                    <md-button class="md-raised md-primary" ng-click="openPdf()">
                                        <md-icon>file_download</md-icon>
                                        <span translate>Download Profile</span>
                                    </md-button>
                                </md-card-actions>
                            </md-card>
                            <md-card class="profile-card">
                                <md-card-title>
                                    <md-card-title-text>
                                        <span class="md-headline" translate>Profiles</span>
                                    </md-card-title-text>
                                    <md-card-actions layout="row">
                                        <md-button class="md-icon-button" ng-click="add(personnelSelected, 'profiles', 'profiles')" aria-label="Edit profiles">
                                            <md-icon>edit</md-icon>
                                            <md-tooltip md-direction="top">
                                                <span translate>Edit profiles</span>
                                            </md-tooltip>
                                        </md-button>
                                    </md-card-actions>
                                </md-card-title>
                                <md-card-content>
                                    <md-list class="profile-list" ng-cloak>
                                        <div ng-repeat="profile in profiles" class="profile-item">
                                            <md-list-item>
                                                <md-icon>check_circle</md-icon>
                                                <p class="info-label">{{profile.name}}</p>
                                            </md-list-item>
                                            <md-divider ng-if="!$last"></md-divider>
                                        </div>
                                        <div class="empty-state" layout="row" layout-align="center center" 
                                             data-ng-if="profiles && profiles.length <= 0">
                                            <md-icon class="empty-icon">assignment_ind</md-icon>
                                            <h2 class="md-title">{{helperNoData.title}}</h2>
                                        </div>
                                    </md-list>
                                    
                                    <div class="profile-progress">
                                        <div class="progress-header" layout="row" layout-align="space-between center">
                                            <p class="progress-label">
                                                <span translate>Profile match</span>
                                            </p>
                                            <p class="progress-value">{{personnelSelected.profilesCorresponding}}%</p>
                                        </div>
                                        <div class="progress-bar-container">
                                            <md-progress-linear md-mode="determinate" 
                                                               value="{{personnelSelected.profilesCorresponding}}"
                                                               class="profile-progress-bar"></md-progress-linear>
                                        </div>
                                    </div>
                                    <!--                                    <span flex></span>
                                                                        <div oc-lazy-load="'node_modules/angularjs-gauge/dist/angularjs-gauge.min.js'"  layout="column" layout-align="center center" flex>
                                                                            <span flex></span>
                                                                            <ng-gauge size="100" type="full" thick="10" min="0" max="120" value='{{20}}' cap="butt" label="of required"  foreground-color="#0fbf41" background-color="#ededed" append="%" flex></ng-gauge>
                                                                        </div>-->
                                </md-card-content>
                            </md-card>
                            <!--required skills-->
                            <md-card class="skills-card">
                                <md-card-title>
                                    <md-card-title-text>
                                        <span class="md-headline" translate>Skills</span>
                                    </md-card-title-text>
                                    <md-card-actions layout="row">
                                        <md-button class="md-icon-button" ng-click="add(personnelSelected, 'skills', 'skills')" aria-label="Edit skills">
                                            <md-icon>edit</md-icon>
                                            <md-tooltip md-direction="top">
                                                <span translate>Edit skills</span>
                                            </md-tooltip>
                                        </md-button>
                                    </md-card-actions>
                                </md-card-title>
                                <md-card-content>
                                    <md-list class="skills-list" ng-cloak>
                                        <div ng-repeat="skill in skills" class="skill-item">
                                            <md-list-item>
                                                <md-icon>school</md-icon>
                                                <p class="info-label">{{skill.name}}</p>
                                            </md-list-item>
                                            <md-divider ng-if="!$last"></md-divider>
                                        </div>
                                        <div class="empty-state" layout="row" layout-align="center center" 
                                             data-ng-if="skills && skills.length <= 0">
                                            <md-icon class="empty-icon">school</md-icon>
                                            <h2 class="md-title">{{helperNoData.title}}</h2>
                                        </div>
                                    </md-list>
                                    
                                    <div class="skill-progress">
                                        <div class="progress-header" layout="row" layout-align="space-between center">
                                            <p class="progress-label">
                                                <span translate>Skills match</span>
                                            </p>
                                            <p class="progress-value">{{personnelSelected.skillsCorresponding}}%</p>
                                        </div>
                                        <div class="progress-bar-container">
                                            <md-progress-linear md-mode="determinate" 
                                                               value="{{personnelSelected.skillsCorresponding}}"
                                                               class="skill-progress-bar"></md-progress-linear>
                                        </div>
                                    </div>
                                    <!--                                    <span flex></span>
                                                                        <div oc-lazy-load="'node_modules/angularjs-gauge/dist/angularjs-gauge.min.js'"  layout="column" layout-align="center center" flex>
                                                                            <span flex></span>
                                                                            <ng-gauge size="100" type="full" thick="10" min="0" max="120" value="{{personnelSelected.skillsCorresponding}}" cap="butt" label="of required"  foreground-color="#0fbf41" background-color="#ededed" append="%" flex></ng-gauge>
                                                                        </div>-->
                                </md-card-content>
                            </md-card>
                        </md-card>
                        <!--Meta--> 
                        <md-card class="meta-card">
                            <md-card-title>
                                <md-card-title-text>
                                    <span class="md-headline" translate>Meta</span>
                                </md-card-title-text>
                            </md-card-title>
                            <md-card-content>
                                <md-list class="meta-list">
                                    <md-list-item>
                                        <md-icon>event_available</md-icon>
                                        <p class="info-label" translate>Created</p>
                                        <p class="info-value md-secondary">{{personnelSelected.created | dateHuman}}</p>
                                    </md-list-item>
                                    <md-divider></md-divider>
                                    <md-list-item>
                                        <md-icon>update</md-icon>
                                        <p class="info-label" translate>Last modified</p>
                                        <p class="info-value md-secondary">{{personnelSelected.lastModified | dateHuman}}</p>
                                    </md-list-item>
                                </md-list>
                            </md-card-content>
                        </md-card>
                    </div>
                    <div flex="15">
                    </div> 
                </md-content>
            </md-tab>
            <md-tab label='{{"History"| translate }}' ng-click="selectTab(1)">
                <md-content >
                    <div oc-lazy-load="'node_modules/angular-timeline/dist/angular-timeline.js'">
                        <timeline>
                            <timeline-event ng-repeat="affectation in allAffectations">
                                <timeline-badge ng-click="read($index);">
                                    <md-icon style="color:#fff;" >start</md-icon>
                                </timeline-badge>
                                <timeline-panel ng-click="read($index);">
                                    <span class="md-caption" translate> Start date: </span> <span style="color:#444" class="md-caption">{{affectation.startDate| dateHuman | unknown}}</span> |
                                    <span class="md-caption" translate> End date: </span> <span style="color:#444" class="md-caption">{{affectation.endDate| dateHuman | unknown}}</span>
                                    <timeline-heading>
                                        <h4 style="margin:0;"><span style="color: cadetblue"> &#8593; </span> {{affectation.newPosition.fr| uppercase | unknown}}</h4>
                                    </timeline-heading>
                                    <span ><small ><b>{{affectation.structureAffectation.fr}} &#8594; {{affectation.structureAffectationFather.fr}}</b></small> </span>
                                    <br/> 
                                    <small ><span style="color: chocolate"> &#8595; </span>  <span translate> Précédement: </span><span> {{affectation.oldPosition.fr| uppercase | unknown}}</span></small>
                                    <br ng-if="affectation.oldStructureAffectation"/> 
                                    <span ng-if="affectation.oldStructureAffectation"><small >{{affectation.oldStructureAffectation.fr}} &#8594; {{affectation.oldStructureAffectationFather.fr}}</small> </span>
                                    <br/><small ><span>{{affectation.mouvementBeautified}}</span> <span ng-if="affectation.mouvementBeautified" translate>by </span> <span>{{affectation.natureBeautified}} </span> <span ng-if="affectation.mouvementBeautified" > N°: </span> <span> {{affectation.numAct}}</span></small>

                                </timeline-panel>
                            </timeline-event>
                        </timeline>
                    </div>
                </md-content>
            </md-tab>
            <md-tab label='{{"Physical records"| translate }}' ng-click="selectTab(2)">
                <md-card-actions layout="row" ng-if="personnelSelected">

                    <span flex></span>
                    <md-button  class="button task activelist" ng-click="zipAll()">
                        <i class="icon-file-zip"></i> <span translate>Download all</span>
                    </md-button>
                </md-card-actions>
                <md-content >

                    <md-table-container>
                        <table id="procrastinate" md-table md-progress="promise">
                            <thead md-head md-order="query.order" class="procrastinateTable">
                                <tr md-row>
                                    <th md-column md-order-by="type"  translate>Identifier</th>
                                    <th md-column md-order-by="type"  translate>Category</th>
                                    <th md-column md-order-by="fileName"  translate >File name</th>
                                    <th md-column md-order-by="date" style="width: 180px" translate>Date</th>
                                    <th md-column translate style="width: 10px">Actions</th>
                                </tr>
                            </thead>
                            <tbody md-body dnd-list="list" class="ng-scope procrastinateTable" >
                                <tr md-row   data-ng-repeat="doc in documents.data| orderBy: query.order | limitTo: query.limit: (query.page - 1) * query.limit" >
                                    <td md-cell ng-click="details(doc)">
                                        <span >{{doc.identifier}}</span>
                                    </td>
                                    <td md-cell ng-click="details(doc)">
                                        <span >{{doc.categoryBeautified}}</span>
                                    </td>
                                    <td md-cell flex  ng-click="details(doc)">
                                        {{doc.fileName}}
                                    </td>
                                    <td md-cell  style="width: 180px" ng-click="details(doc)">{{doc.created|smartDatetime}} </td>
                                    <td md-cell style="width: 10px" >
                            <md-menu>
                                <md-button class="md-icon-button"  ng-click="$mdOpenMenu()" >
                                    <md-icon class="material-icons" >more_vert</md-icon>
                                    <md-tooltip>
                                        <span translate>More actions</span>
                                    </md-tooltip>
                                </md-button>
                                <md-menu-content width="4">
                                    <md-menu-item>
                                        <md-button ng-click="view(doc)" >
                                            <i class="icon-eye mr-2"></i>
                                            <span translate>View</span>
                                        </md-button>
                                    </md-menu-item>
                                    <md-menu-item>
                                        <md-button ng-click="details(doc)" >
                                            <i class="icon-clipboard3 mr-2"></i>
                                            <span translate>Details</span>
                                        </md-button>
                                    </md-menu-item>
                                    <md-menu-item>
                                        <md-button ng-click="edit(doc)" >
                                            <i class="icon-pencil7 mr-2"></i>
                                            <span translate>Edit</span>
                                        </md-button>
                                    </md-menu-item>
                                    <md-menu-item>
                                        <md-button ng-click="download(doc)" >
                                            <i class="icon-cloud-download mr-2"></i> 
                                            <span translate>Download </span>
                                        </md-button>
                                    </md-menu-item>
                                    <md-menu-item>
                                        <md-button ng-click="showConfirm(doc)" ng-if="account.role == '1' || account.role == '3'">
                                            <md-icon class="material-icons" >delete</md-icon>
                                            <span translate>Delete this document</span>
                                        </md-button>
                                    </md-menu-item>
                                </md-menu-content>
                            </md-menu>
                            </td>
                            </tr>
                            </tbody>
                        </table>

                    </md-table-container>
                </md-content>

                <div style="margin-bottom: 100px"></div>
                <md-button  class="md-fab md-accent md-fab-bottom-right" ng-if="personnelSelected && (currentTab === 2 || currentTab === 2)" aria-label="Add" ng-click="new (personnelSelected)" >
                    <md-icon>cloud_upload</md-icon>
                    <md-tooltip md-direction="top">
                        <span translate>Import file</span>
                    </md-tooltip>
                </md-button>
            </md-tab>

        </md-tabs>


        <md-card-actions layout="row" ng-if="personnelSelected && currentTab === 0" style="margin-top: -30px">
            <!--            <md-button ng-click="back()" class="md-raised md-primary" aria-label="Back" >
                            <md-icon>arrow_back_ios</md-icon>
                            <span translate>Back</span>
                        </md-button>-->
            <span flex></span>
            <md-button  class="md-raised md-primary" aria-label="Edit" ng-click="edit({id: personnelSelected._id})" >
                <md-icon>edit</md-icon>
                <span translate>Edit</span>
            </md-button>
            <!--            <md-button  class="md-raised" aria-label="Print" ng-click="openPdf()">
                            <md-icon>print</md-icon>
                            <span translate>Print</span>
                        </md-button>-->
        </md-card-actions>
    </md-content>
</div>

