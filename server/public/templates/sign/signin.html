<div class="auth-container">
    <!-- Auth card -->
    <div class="auth-card">
        <!-- Loading overlay -->
        <div class="auth-loading" ng-if="loading">
            <md-progress-circular md-mode="indeterminate" md-diameter="50" class="md-accent"></md-progress-circular>
        </div>

        <!-- Auth header -->
        <div class="auth-header">
            <div class="auth-icon-container">
                <md-icon class="material-icons auth-icon">account_circle</md-icon>
            </div>
            <h1 class="auth-title">{{kernel.title || 'Admineex'}}</h1>
            <p class="auth-subtitle" translate>Entrez vos identifiants pour accéder à votre compte</p>
        </div>

        <!-- Auth body -->
        <div class="auth-body">
            <!-- Error message -->
            <div class="auth-error" ng-if="loginError">
                <md-icon class="material-icons">error_outline</md-icon>
                <span>{{loginError}}</span>
                <button type="button" class="close" ng-click="loginError = null">×</button>
            </div>

            <!-- Login form -->
            <form class="auth-form" name="loginForm" ng-submit="signin();" novalidate>
                <md-input-container class="md-block">
                    <label translate>Email</label>
                    <md-icon class="material-icons">email</md-icon>
                    <input type="email" ng-model="email" name="email" required 
                           autocomplete="email" autocorrect="off" autocapitalize="off" spellcheck="false">
                    <div ng-messages="loginForm.email.$error" ng-if="loginForm.email.$touched">
                        <div ng-message="required" translate>L'email est requis</div>
                        <div ng-message="email" translate>Format d'email invalide</div>
                    </div>
                </md-input-container>

                <md-input-container class="md-block">
                    <label translate>Mot de passe</label>
                    <md-icon class="material-icons">lock</md-icon>
                    <input type="{{ showPassword ? 'text' : 'password' }}" ng-model="password" name="password" required 
                           autocomplete="current-password">
                    <div class="password-toggle">
                        <md-button class="md-icon-button" ng-click="showPassword = !showPassword" aria-label="Toggle password visibility">
                            <md-icon class="material-icons">{{ showPassword ? 'visibility_off' : 'visibility' }}</md-icon>
                        </md-button>
                    </div>
                    <div ng-messages="loginForm.password.$error" ng-if="loginForm.password.$touched">
                        <div ng-message="required" translate>Le mot de passe est requis</div>
                    </div>
                </md-input-container>

                <div layout="row" layout-align="space-between center" class="mb-3">
                    <md-checkbox ng-model="rememberMe" aria-label="Remember me">
                        <span translate>Se souvenir de moi</span>
                    </md-checkbox>
                    <a ui-sref="recovery.lost" class="auth-link" translate>Mot de passe oublié?</a>
                </div>

                <md-button type="submit" class="md-primary md-raised" ng-disabled="loginForm.$invalid && loginForm.$dirty">
                    <span ng-if="!loading" translate>Connexion</span>
                    <span ng-if="loading"><md-icon class="material-icons spin">sync</md-icon> <span translate>Connexion en cours...</span></span>
                </md-button>

                <div class="auth-divider">
                    <span translate>Vous n'avez pas de compte?</span>
                </div>

                <md-button ui-sref="signup" class="md-raised" aria-label="Create account">
                    <md-icon class="material-icons">person_add</md-icon>
                    <span translate>Créer un compte</span>
                </md-button>
            </form>
        </div>

        <!-- Auth footer -->
        <div class="auth-footer">
            <p translate>© {{currentYear = (currentYear || new Date().getFullYear())}} Admineex - Système de Gestion du Personnel</p>
        </div>
    </div>
</div>

<style>
/* Animation for spinner */
.spin {
    animation: spin 1.5s linear infinite;
}
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Auth icon container */
.auth-icon-container {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background-color: #E3F2FD;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 15px;
}

.auth-icon {
    font-size: 36px !important;
    color: #2196F3;
}

/* Auth link */
.auth-link {
    color: #2196F3;
    text-decoration: none;
    font-size: 14px;
}

.auth-link:hover {
    text-decoration: underline;
}
</style>
